"use strict";(self.webpackChunkdocusaurus_lms_demo=self.webpackChunkdocusaurus_lms_demo||[]).push([[9739],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var i=s(96540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}},29731:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Features/Atlas Reasoning Engine/stage-1-chitchat-detection","title":"Stage 1 - Chit-Chat Detection","description":"Understand how Atlas determines if a query is a genuine request or casual conversation.","source":"@site/genai/Features/3. Atlas Reasoning Engine/stage-1-chitchat-detection.md","sourceDirName":"Features/3. Atlas Reasoning Engine","slug":"/atlas-reasoning-engine/stage-1-chitchat-detection","permalink":"/genai/atlas-reasoning-engine/stage-1-chitchat-detection","draft":false,"unlisted":false,"editUrl":"https://github.com/sf-explorer/documentation/tree/master/genai/Features/3. Atlas Reasoning Engine/stage-1-chitchat-detection.md","tags":[],"version":"current","lastUpdatedAt":1765442046000,"sidebarPosition":4,"frontMatter":{"id":"stage-1-chitchat-detection","slug":"/atlas-reasoning-engine/stage-1-chitchat-detection","title":"Stage 1 - Chit-Chat Detection","sidebar_label":"Stage 1: Chit-Chat Detection","sidebar_position":4,"description":"Understand how Atlas determines if a query is a genuine request or casual conversation.","keywords":["chit-chat","detection","validation","intent classification"]},"sidebar":"genaiSidebar","previous":{"title":"Atlas Reasoning Engine","permalink":"/genai/atlas-reasoning-engine"},"next":{"title":"Stage 2: Query Evaluation","permalink":"/genai/atlas-reasoning-engine/stage-2-query-evaluation"}}');var t=s(74848),r=s(28453);const l={id:"stage-1-chitchat-detection",slug:"/atlas-reasoning-engine/stage-1-chitchat-detection",title:"Stage 1 - Chit-Chat Detection",sidebar_label:"Stage 1: Chit-Chat Detection",sidebar_position:4,description:"Understand how Atlas determines if a query is a genuine request or casual conversation.",keywords:["chit-chat","detection","validation","intent classification"]},o="Stage 1: Chit-Chat Detection",a={},c=[{value:"Overview",id:"overview",level:2},{value:"What Happens in This Stage",id:"what-happens-in-this-stage",level:2},{value:"Input Analysis",id:"input-analysis",level:3},{value:"Classification Categories",id:"classification-categories",level:3},{value:"Examples",id:"examples",level:2},{value:"\u2705 Valid Queries (Pass Through)",id:"-valid-queries-pass-through",level:3},{value:"\u26a0\ufe0f Chit-Chat (Simple Response)",id:"\ufe0f-chit-chat-simple-response",level:3},{value:"\u274c Out of Scope (Rejected)",id:"-out-of-scope-rejected",level:3},{value:"How It Works",id:"how-it-works",level:2},{value:"1. Text Preprocessing",id:"1-text-preprocessing",level:3},{value:"2. Intent Classification",id:"2-intent-classification",level:3},{value:"3. Confidence Scoring",id:"3-confidence-scoring",level:3},{value:"Benefits",id:"benefits",level:2},{value:"\u26a1 Performance Optimization",id:"-performance-optimization",level:3},{value:"\ud83d\udcb0 Cost Reduction",id:"-cost-reduction",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Adjusting Sensitivity",id:"adjusting-sensitivity",level:3},{value:"Custom Responses",id:"custom-responses",level:3},{value:"Monitoring",id:"monitoring",level:2},{value:"Performance Considerations",id:"performance-considerations",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue: Valid Queries Marked as Chit-Chat",id:"issue-valid-queries-marked-as-chit-chat",level:3},{value:"Issue: Too Many Queries Pass Through",id:"issue-too-many-queries-pass-through",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"\u2705 Do&#39;s",id:"-dos",level:3},{value:"\u274c Don&#39;ts",id:"-donts",level:3},{value:"Integration with Stage 2",id:"integration-with-stage-2",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"stage-1-chit-chat-detection",children:"Stage 1: Chit-Chat Detection"})}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["The first stage of the Atlas Reasoning Engine determines whether the input is a ",(0,t.jsx)(n.strong,{children:"valid query within scope"})," or ",(0,t.jsx)(n.strong,{children:"casual conversation"})," (chit-chat)."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Processing Time:"})," 50-100ms",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Type:"})," Fast validation",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Purpose:"})," Filter out off-topic requests and casual greetings"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"what-happens-in-this-stage",children:"What Happens in This Stage"}),"\n",(0,t.jsx)(n.h3,{id:"input-analysis",children:"Input Analysis"}),"\n",(0,t.jsx)(n.p,{children:"Atlas analyzes the incoming text to classify the intent:"}),"\n",(0,t.jsx)(n.mermaid,{value:"graph LR\n    Input[User Input] --\x3e Classify{Classify Intent}\n    Classify --\x3e|Valid Query| Process[Continue to Stage 2]\n    Classify --\x3e|Chit-Chat| Simple[Simple Response]\n    Classify --\x3e|Out of Scope| Reject[Rejection Message]\n    \n    style Input fill:#e3f2fd\n    style Process fill:#c8e6c9\n    style Simple fill:#fff3e0\n    style Reject fill:#ffebee"}),"\n",(0,t.jsx)(n.h3,{id:"classification-categories",children:"Classification Categories"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Category"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Atlas Response"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Valid Query"})]}),(0,t.jsx)(n.td,{children:"Business-related question or request"}),(0,t.jsx)(n.td,{children:"Continue to Stage 2"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["\u26a0\ufe0f ",(0,t.jsx)(n.strong,{children:"Chit-Chat"})]}),(0,t.jsx)(n.td,{children:"Greeting, pleasantry, or social interaction"}),(0,t.jsx)(n.td,{children:"Simple conversational response"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsxs)(n.td,{children:["\u274c ",(0,t.jsx)(n.strong,{children:"Out of Scope"})]}),(0,t.jsx)(n.td,{children:"Request outside agent's capabilities"}),(0,t.jsx)(n.td,{children:"Polite rejection with guidance"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.h3,{id:"-valid-queries-pass-through",children:"\u2705 Valid Queries (Pass Through)"}),"\n",(0,t.jsx)(n.p,{children:"These queries proceed to Stage 2:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'"What\'s the status of order 12345?"\n"Show me all open cases for Acme Corp"\n"Create a new opportunity for John Smith"\n"What are my tasks for today?"\n"Find contacts in the San Francisco region"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\ufe0f-chit-chat-simple-response",children:"\u26a0\ufe0f Chit-Chat (Simple Response)"}),"\n",(0,t.jsx)(n.p,{children:"These get handled with simple responses:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'"Hello" \u2192 "Hi! How can I help you today?"\n"How are you?" \u2192 "I\'m here to help! What can I do for you?"\n"Good morning" \u2192 "Good morning! What would you like to know?"\n"Thank you" \u2192 "You\'re welcome! Is there anything else?"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"-out-of-scope-rejected",children:"\u274c Out of Scope (Rejected)"}),"\n",(0,t.jsx)(n.p,{children:"These get politely rejected:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'"Tell me a joke" \u2192 "I\'m here to help with Salesforce tasks. How can I assist you?"\n"What\'s the weather?" \u2192 "I focus on Salesforce data. How can I help with your business?"\n"Sing a song" \u2192 "I\'m a business assistant. What would you like to know about your data?"\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,t.jsx)(n.h3,{id:"1-text-preprocessing",children:"1. Text Preprocessing"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'Original Input: "Hey there! What\'s the status of my order?"\n\u2193\nNormalized: "what status order"\n\u2193\nIntent Tokens: ["status", "order"]\n'})}),"\n",(0,t.jsx)(n.h3,{id:"2-intent-classification",children:"2. Intent Classification"}),"\n",(0,t.jsx)(n.p,{children:"Atlas uses a classifier to determine the primary intent:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Signal"}),(0,t.jsx)(n.th,{children:"Weight"}),(0,t.jsx)(n.th,{children:"Indicates"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Business terms"}),(0,t.jsx)(n.td,{children:"High"}),(0,t.jsx)(n.td,{children:"Valid query"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Question words"}),(0,t.jsx)(n.td,{children:"Medium"}),(0,t.jsx)(n.td,{children:"Information request"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Greetings only"}),(0,t.jsx)(n.td,{children:"High"}),(0,t.jsx)(n.td,{children:"Chit-chat"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Action verbs"}),(0,t.jsx)(n.td,{children:"High"}),(0,t.jsx)(n.td,{children:"Valid command"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Social phrases"}),(0,t.jsx)(n.td,{children:"Medium"}),(0,t.jsx)(n.td,{children:"Chit-chat"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"3-confidence-scoring",children:"3. Confidence Scoring"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"# Pseudocode\nintent_score = calculate_intent_confidence(tokens)\n\nif intent_score > 0.8:\n    return VALID_QUERY\nelif intent_score > 0.3:\n    return CHIT_CHAT\nelse:\n    return OUT_OF_SCOPE\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"benefits",children:"Benefits"}),"\n",(0,t.jsx)(n.h3,{id:"-performance-optimization",children:"\u26a1 Performance Optimization"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Fast Rejection"}),": Out-of-scope queries don't consume processing resources"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Token Savings"}),": Avoids expensive LLM calls for simple greetings"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Quick Response"}),": Users get immediate feedback for casual interactions"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-cost-reduction",children:"\ud83d\udcb0 Cost Reduction"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Without Chit-Chat Detection"}),(0,t.jsx)(n.th,{children:"With Chit-Chat Detection"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"All queries \u2192 full pipeline"}),(0,t.jsx)(n.td,{children:"Only valid queries \u2192 full pipeline"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:'"Hello" costs 1000+ tokens'}),(0,t.jsx)(n.td,{children:'"Hello" costs < 50 tokens'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Wasted processing time"}),(0,t.jsx)(n.td,{children:"Optimized resource usage"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.h3,{id:"adjusting-sensitivity",children:"Adjusting Sensitivity"}),"\n",(0,t.jsx)(n.p,{children:"Admins can tune the chit-chat detector:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// Example configuration\n{\n  "chitchat_detection": {\n    "enabled": true,\n    "confidence_threshold": 0.8,\n    "allow_greetings": true,\n    "handle_pleasantries": true,\n    "out_of_scope_message": "I\'m here to help with Salesforce. What would you like to know?"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"custom-responses",children:"Custom Responses"}),"\n",(0,t.jsx)(n.p,{children:"Customize responses for chit-chat:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "responses": {\n    "greeting": "Hello! How can I assist you today?",\n    "farewell": "Goodbye! Feel free to reach out anytime.",\n    "thanks": "You\'re welcome! Anything else I can help with?",\n    "out_of_scope": "I focus on Salesforce. How can I help with your business?"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,t.jsx)(n.h3,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Typical Chit-Chat Detection Performance:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Processing Time:"})," 50-100ms per request"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Chit-Chat Detection Rate:"})," 10-20% of incoming queries"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Out-of-Scope Detection Rate:"})," 3-8% of queries"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"False Positive Rate:"})," Less than 5% with well-tuned prompts"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Monitor your agent's performance through ",(0,t.jsx)(n.strong,{children:"Setup \u2192 Einstein \u2192 Einstein for Service"}),". Salesforce provides built-in analytics for query classification and detection accuracy."]})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"issue-valid-queries-marked-as-chit-chat",children:"Issue: Valid Queries Marked as Chit-Chat"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Business queries get simple responses"}),"\n",(0,t.jsx)(n.li,{children:'Users report "agent doesn\'t understand"'}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Lower confidence threshold (0.8 \u2192 0.7)"}),"\n",(0,t.jsx)(n.li,{children:"Add business terms to allowlist"}),"\n",(0,t.jsx)(n.li,{children:"Review false positive logs"}),"\n",(0,t.jsx)(n.li,{children:"Retrain classifier with examples"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"issue-too-many-queries-pass-through",children:"Issue: Too Many Queries Pass Through"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"High processing costs"}),"\n",(0,t.jsx)(n.li,{children:"Many irrelevant queries in pipeline"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Raise confidence threshold (0.8 \u2192 0.9)"}),"\n",(0,t.jsx)(n.li,{children:"Expand out-of-scope patterns"}),"\n",(0,t.jsx)(n.li,{children:"Add domain-specific filters"}),"\n",(0,t.jsx)(n.li,{children:"Review query patterns"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"-dos",children:"\u2705 Do's"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 Allow greetings at conversation start"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Combine greeting + query in single input"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Monitor false positive/negative rates"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Customize responses for your brand"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Track chit-chat patterns over time"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"-donts",children:"\u274c Don'ts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u274c Set threshold too high (blocks valid queries)"}),"\n",(0,t.jsx)(n.li,{children:"\u274c Set threshold too low (wastes resources)"}),"\n",(0,t.jsx)(n.li,{children:"\u274c Ignore user feedback on misclassification"}),"\n",(0,t.jsx)(n.li,{children:"\u274c Use generic responses (poor UX)"}),"\n",(0,t.jsx)(n.li,{children:"\u274c Disable monitoring"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"integration-with-stage-2",children:"Integration with Stage 2"}),"\n",(0,t.jsxs)(n.p,{children:["Queries that pass Stage 1 move to ",(0,t.jsx)(n.a,{href:"./stage-2-query-evaluation",children:"Stage 2: Query Evaluation"}),":"]}),"\n",(0,t.jsx)(n.mermaid,{value:"graph LR\n    S1[Stage 1: Chit-Chat Detection] --\x3e|Valid Query| S2[Stage 2: Query Evaluation]\n    S1 --\x3e|Chit-Chat| End[Simple Response]\n    \n    style S1 fill:#e1f5ff\n    style S2 fill:#fff4e6\n    style End fill:#ffebee"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"./stage-2-query-evaluation",children:"Stage 2: Query Evaluation"})})," - Next stage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"../",children:"Complete Pipeline"})})," - All stages overview"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Stage 1 ensures that only valid business queries consume expensive processing resources, optimizing both performance and cost."})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);