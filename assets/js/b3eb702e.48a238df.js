"use strict";(self.webpackChunkdocusaurus_lms_demo=self.webpackChunkdocusaurus_lms_demo||[]).push([[4861],{24934:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Features/Testing Center/custom-evaluation-criteria","title":"Custom Evaluation Criteria","description":"Test specific strings or numbers in agent responses using JSONPath expressions with custom string and numeric comparisons","source":"@site/genai/Features/3. Testing Center/3-custom-evaluation-criteria.md","sourceDirName":"Features/3. Testing Center","slug":"/custom-evaluation-criteria","permalink":"/genai/custom-evaluation-criteria","draft":false,"unlisted":false,"editUrl":"https://github.com/sf-explorer/documentation/tree/master/genai/Features/3. Testing Center/3-custom-evaluation-criteria.md","tags":[],"version":"current","lastUpdatedAt":1767863742000,"sidebarPosition":8,"frontMatter":{"id":"custom-evaluation-criteria","slug":"/custom-evaluation-criteria","title":"Custom Evaluation Criteria","sidebar_label":"Custom Evaluations","sidebar_position":8,"description":"Test specific strings or numbers in agent responses using JSONPath expressions with custom string and numeric comparisons","image":"../../images/testing_center.png","keywords":["agentforce","custom evaluations","JSONPath","string comparison","numeric comparison","test assertions","action validation"]},"sidebar":"genaiSidebar","previous":{"title":"Adding Test Cases","permalink":"/genai/adding-test-cases"},"next":{"title":"Chat with Agents","permalink":"/genai/chat-with-agents"}}');var t=s(74848),r=s(28453);const l={id:"custom-evaluation-criteria",slug:"/custom-evaluation-criteria",title:"Custom Evaluation Criteria",sidebar_label:"Custom Evaluations",sidebar_position:8,description:"Test specific strings or numbers in agent responses using JSONPath expressions with custom string and numeric comparisons",image:"../../images/testing_center.png",keywords:["agentforce","custom evaluations","JSONPath","string comparison","numeric comparison","test assertions","action validation"]},c="Custom Evaluation Criteria",a={},d=[{value:"The Problem",id:"the-problem",level:2},{value:"How GenAI Explorer Solves This",id:"how-genai-explorer-solves-this",level:2},{value:"Custom Evaluation Types",id:"custom-evaluation-types",level:2},{value:"String Comparison",id:"string-comparison",level:3},{value:"Numeric Comparison",id:"numeric-comparison",level:3},{value:"How to Add Custom Evaluations",id:"how-to-add-custom-evaluations",level:2},{value:"Step 1: Open Test Editor",id:"step-1-open-test-editor",level:3},{value:"Step 2: Configure Evaluation",id:"step-2-configure-evaluation",level:3},{value:"Step 3: Save and Test",id:"step-3-save-and-test",level:3},{value:"Understanding JSONPath",id:"understanding-jsonpath",level:2},{value:"Test Results Structure",id:"test-results-structure",level:3},{value:"Common JSONPath Patterns",id:"common-jsonpath-patterns",level:3},{value:"Get Action Input Field",id:"get-action-input-field",level:4},{value:"Get Action Output",id:"get-action-output",level:4},{value:"Get Performance Metric",id:"get-performance-metric",level:4},{value:"How Filtering Works",id:"how-filtering-works",level:3},{value:"Real-World Use Cases",id:"real-world-use-cases",level:2},{value:"1. Validate Action Inputs",id:"1-validate-action-inputs",level:3},{value:"2. Verify Action Success",id:"2-verify-action-success",level:3},{value:"3. Performance Testing",id:"3-performance-testing",level:3},{value:"4. API Call Limits",id:"4-api-call-limits",level:3},{value:"5. Data Format Validation",id:"5-data-format-validation",level:3},{value:"6. Content Requirements",id:"6-content-requirements",level:3},{value:"Test Results Display",id:"test-results-display",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Descriptive Labels",id:"1-use-descriptive-labels",level:3},{value:"2. Validate JSONPath First",id:"2-validate-jsonpath-first",level:3},{value:"3. Remember Case Sensitivity",id:"3-remember-case-sensitivity",level:3},{value:"4. Start Simple, Then Expand",id:"4-start-simple-then-expand",level:3},{value:"5. Character Limit",id:"5-character-limit",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"JSONPath Returns No Data",id:"jsonpath-returns-no-data",level:3},{value:"String Comparison Fails Unexpectedly",id:"string-comparison-fails-unexpectedly",level:3},{value:"Numeric Comparison Issues",id:"numeric-comparison-issues",level:3},{value:"Custom Evaluation Not Visible",id:"custom-evaluation-not-visible",level:3},{value:"Advanced Patterns",id:"advanced-patterns",level:2},{value:"Multiple Conditions",id:"multiple-conditions",level:3},{value:"Array Elements",id:"array-elements",level:3},{value:"Nested Properties",id:"nested-properties",level:3},{value:"Quick Reference",id:"quick-reference",level:2},{value:"Additional Resources",id:"additional-resources",level:2},{value:"Related Features",id:"related-features",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"custom-evaluation-criteria",children:"Custom Evaluation Criteria"})}),"\n",(0,t.jsx)(n.p,{children:"Test specific strings or numbers in agent responses, extending testing capabilities beyond standard expectations like topics and actions."}),"\n",(0,t.jsx)(n.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Standard test expectations don't cover all testing needs."})}),"\n",(0,t.jsx)(n.p,{children:"When testing AI agents, teams need to validate:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\ud83c\udfaf ",(0,t.jsx)(n.strong,{children:"Action Inputs"}),': "Did the agent pass the correct account ID?"']}),"\n",(0,t.jsxs)(n.li,{children:["\ud83d\udcca ",(0,t.jsx)(n.strong,{children:"Action Outputs"}),': "Did the API call return success?"']}),"\n",(0,t.jsxs)(n.li,{children:["\u26a1 ",(0,t.jsx)(n.strong,{children:"Performance"}),': "Was the response time under 10 seconds?"']}),"\n",(0,t.jsxs)(n.li,{children:["\ud83d\udd22 ",(0,t.jsx)(n.strong,{children:"Counts"}),': "Were fewer than 5 API calls made?"']}),"\n",(0,t.jsxs)(n.li,{children:["\ud83d\udcdd ",(0,t.jsx)(n.strong,{children:"Data Formats"}),': "Is the phone number formatted correctly?"']}),"\n",(0,t.jsxs)(n.li,{children:["\u2709\ufe0f ",(0,t.jsx)(n.strong,{children:"Content Validation"}),': "Does the email contain the customer\'s name?"']}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"In short"}),": You need granular control over what gets tested in agent responses."]}),"\n",(0,t.jsx)(n.h2,{id:"how-genai-explorer-solves-this",children:"How GenAI Explorer Solves This"}),"\n",(0,t.jsxs)(n.p,{children:["GenAI Explorer provides ",(0,t.jsx)(n.strong,{children:"custom evaluation criteria"})," with:"]}),"\n",(0,t.jsxs)(n.p,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Two Evaluation Types"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"String comparisons (equals, contains, starts with, ends with)"}),"\n",(0,t.jsx)(n.li,{children:"Numeric comparisons (equals, greater than, less than, etc.)"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"JSONPath Expressions"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Extract any value from test results"}),"\n",(0,t.jsx)(n.li,{children:"Target specific action inputs/outputs"}),"\n",(0,t.jsx)(n.li,{children:"Access nested data structures"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Visual Editor"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Guided dialog for creating evaluations"}),"\n",(0,t.jsx)(n.li,{children:"JSONPath pattern examples"}),"\n",(0,t.jsx)(n.li,{children:"Real-time preview of logic"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Flexible Assertions"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Test exact matches or partial matches"}),"\n",(0,t.jsx)(n.li,{children:"Compare ranges and thresholds"}),"\n",(0,t.jsx)(n.li,{children:"Validate data formats"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"custom-evaluation-types",children:"Custom Evaluation Types"}),"\n",(0,t.jsx)(n.h3,{id:"string-comparison",children:"String Comparison"}),"\n",(0,t.jsx)(n.p,{children:"Test text values with four operators:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Operator"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Example"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"equals"})}),(0,t.jsx)(n.td,{children:"Exact match (case-sensitive)"}),(0,t.jsx)(n.td,{children:'"Jon" equals "Jon" \u2713'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"contains"})}),(0,t.jsx)(n.td,{children:"Substring match"}),(0,t.jsx)(n.td,{children:'"Hello Jon" contains "Jon" \u2713'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"startswith"})}),(0,t.jsx)(n.td,{children:"Prefix match"}),(0,t.jsx)(n.td,{children:'"Hello World" starts with "Hello" \u2713'})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"endswith"})}),(0,t.jsx)(n.td,{children:"Suffix match"}),(0,t.jsx)(n.td,{children:'"example.com" ends with ".com" \u2713'})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"numeric-comparison",children:"Numeric Comparison"}),"\n",(0,t.jsx)(n.p,{children:"Test numbers with five operators:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Operator"}),(0,t.jsx)(n.th,{children:"Symbol"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Example"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"equals"})}),(0,t.jsx)(n.td,{children:"="}),(0,t.jsx)(n.td,{children:"Equal to"}),(0,t.jsx)(n.td,{children:"10 = 10 \u2713"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"greater_than"})}),(0,t.jsx)(n.td,{children:">"}),(0,t.jsx)(n.td,{children:"Greater than"}),(0,t.jsx)(n.td,{children:"15 > 10 \u2713"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"greater_than_or_equal"})}),(0,t.jsx)(n.td,{children:">="}),(0,t.jsx)(n.td,{children:"Greater or equal"}),(0,t.jsx)(n.td,{children:"10 >= 10 \u2713"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"less_than"})}),(0,t.jsx)(n.td,{children:"<"}),(0,t.jsx)(n.td,{children:"Less than"}),(0,t.jsx)(n.td,{children:"5 < 10 \u2713"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"less_than_or_equal"})}),(0,t.jsx)(n.td,{children:"<="}),(0,t.jsx)(n.td,{children:"Less or equal"}),(0,t.jsx)(n.td,{children:"10 <= 10 \u2713"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"how-to-add-custom-evaluations",children:"How to Add Custom Evaluations"}),"\n",(0,t.jsx)(n.h3,{id:"step-1-open-test-editor",children:"Step 1: Open Test Editor"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Navigate to your AI Evaluation Definition"}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Edit"})," on a test case"]}),"\n",(0,t.jsxs)(n.li,{children:["Scroll to the ",(0,t.jsx)(n.strong,{children:"\ud83d\udd2c Custom Evaluations"})," section"]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:'"Add Custom Evaluation"'})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"step-2-configure-evaluation",children:"Step 2: Configure Evaluation"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example 1: Validate Email Recipient"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Evaluation Type: String Comparison\nLabel: Expected recipient match\nOperator: equals\n\n\u2611 Actual value is a JSONPath reference\nActual Value: \n  $.generatedData.invokedActions[*][?(@.function.name == 'DraftGenericReplyEmail')].function.input.recipient\n\nExpected Value: alice@example.com\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example 2: Check Subject Contains Keyword"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Evaluation Type: String Comparison\nLabel: Subject mentions project\nOperator: contains\n\n\u2611 Actual value is a JSONPath reference\nActual Value:\n  $.generatedData.invokedActions[*][?(@.function.name == 'DraftGenericReplyEmail')].function.input.subject\n\nExpected Value: project\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example 3: Response Time Threshold"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Evaluation Type: Numeric Comparison\nLabel: Response under 10 seconds\nOperator: less_than\n\n\u2611 Actual value is a JSONPath reference\nActual Value:\n  $.generatedData.latencyMs\n\nExpected Value: 10000\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-3-save-and-test",children:"Step 3: Save and Test"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:'"Add Evaluation"'})]}),"\n",(0,t.jsx)(n.li,{children:"Review the custom evaluation card"}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:'"Save Changes"'})," on the test editor"]}),"\n",(0,t.jsx)(n.li,{children:"Run your test to see results"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"understanding-jsonpath",children:"Understanding JSONPath"}),"\n",(0,t.jsx)(n.p,{children:"JSONPath expressions extract values from the test results JSON structure."}),"\n",(0,t.jsx)(n.h3,{id:"test-results-structure",children:"Test Results Structure"}),"\n",(0,t.jsx)(n.p,{children:"When you run a test, the agent generates data like this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "generatedData": {\n    "invokedActions": [\n      {\n        "function": {\n          "name": "DraftGenericReplyEmail",\n          "input": { \n            "recipient": "alice@example.com",\n            "subject": "Re: Project Update"\n          },\n          "result": "Success"\n        }\n      }\n    ],\n    "latencyMs": 2500\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"common-jsonpath-patterns",children:"Common JSONPath Patterns"}),"\n",(0,t.jsx)(n.h4,{id:"get-action-input-field",children:"Get Action Input Field"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonpath",children:"$.generatedData.invokedActions[*][?(@.function.name == 'ActionName')].function.input.fieldName\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Explanation:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"$.generatedData"})," - Start at root"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:".invokedActions[*]"})," - Look through all actions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"[?(@.function.name == 'ActionName')]"})," - Filter to specific action"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:".function.input.fieldName"})," - Get the input field"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonpath",children:"$.generatedData.invokedActions[*][?(@.function.name == 'DraftGenericReplyEmail')].function.input.recipient\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Returns: ",(0,t.jsx)(n.code,{children:'"alice@example.com"'})]}),"\n",(0,t.jsx)(n.h4,{id:"get-action-output",children:"Get Action Output"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonpath",children:"$.generatedData.invokedActions[*][?(@.function.name == 'ActionName')].function.result\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonpath",children:"$.generatedData.invokedActions[*][?(@.function.name == 'CreateCase')].function.result\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Returns: ",(0,t.jsx)(n.code,{children:'"Success"'})]}),"\n",(0,t.jsx)(n.h4,{id:"get-performance-metric",children:"Get Performance Metric"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonpath",children:"$.generatedData.latencyMs\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Returns: ",(0,t.jsx)(n.code,{children:"2500"})]}),"\n",(0,t.jsx)(n.h3,{id:"how-filtering-works",children:"How Filtering Works"}),"\n",(0,t.jsx)(n.p,{children:"Given this data:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "generatedData": {\n    "invokedActions": [\n      {\n        "function": {\n          "name": "DraftGenericReplyEmail",\n          "input": { "recipient": "alice@example.com" }\n        }\n      },\n      {\n        "function": {\n          "name": "OtherFunction",\n          "input": { "recipient": "bob@example.com" }\n        }\n      }\n    ]\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"This expression:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonpath",children:"$.generatedData.invokedActions[*][?(@.function.name == 'DraftGenericReplyEmail')].function.input.recipient\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Returns: ",(0,t.jsx)(n.code,{children:'"alice@example.com"'})," (not bob's email)"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why?"})," The filter ",(0,t.jsx)(n.code,{children:"[?(@.function.name == 'DraftGenericReplyEmail')]"})," only matches the first action."]}),"\n",(0,t.jsx)(n.h2,{id:"real-world-use-cases",children:"Real-World Use Cases"}),"\n",(0,t.jsx)(n.h3,{id:"1-validate-action-inputs",children:"1. Validate Action Inputs"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario:"})," Ensure correct account ID is passed"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Type: String Comparison\nOperator: startswith\nActual: $.generatedData.invokedActions[*][?(@.function.name == 'GetAccountInfo')].function.input.accountId\nExpected: 001\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-verify-action-success",children:"2. Verify Action Success"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario:"})," Check case creation succeeded"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Type: String Comparison\nOperator: contains\nActual: $.generatedData.invokedActions[*][?(@.function.name == 'CreateCase')].function.result\nExpected: Success\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-performance-testing",children:"3. Performance Testing"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario:"})," Response within 5 seconds"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Type: Numeric Comparison\nOperator: less_than_or_equal\nActual: $.generatedData.latencyMs\nExpected: 5000\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-api-call-limits",children:"4. API Call Limits"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario:"})," Maximum 3 external calls"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Type: Numeric Comparison\nOperator: less_than_or_equal\nActual: $.generatedData.apiCallCount\nExpected: 3\n"})}),"\n",(0,t.jsx)(n.h3,{id:"5-data-format-validation",children:"5. Data Format Validation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario:"})," Phone number has country code"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Type: String Comparison\nOperator: startswith\nActual: $.generatedData.invokedActions[*][?(@.function.name == 'FormatPhoneNumber')].function.result\nExpected: +1\n"})}),"\n",(0,t.jsx)(n.h3,{id:"6-content-requirements",children:"6. Content Requirements"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario:"})," Email mentions customer name"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Type: String Comparison\nOperator: contains\nActual: $.generatedData.invokedActions[*][?(@.function.name == 'DraftEmail')].function.input.body\nExpected: {{customerName}}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"test-results-display",children:"Test Results Display"}),"\n",(0,t.jsx)(n.p,{children:"Custom evaluations appear as purple columns (\ud83d\udd2c) in the test cases table:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pass (\u2713)"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Green checkmark"}),"\n",(0,t.jsx)(n.li,{children:"Shows comparison details"}),"\n",(0,t.jsx)(n.li,{children:'Displays "10 < 10000" or "text contains \'keyword\'"'}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Fail (\u2717)"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Red error icon"}),"\n",(0,t.jsx)(n.li,{children:"Shows why it failed"}),"\n",(0,t.jsx)(n.li,{children:'Displays "alice \u2260 bob" or "15 \u2265 10"'}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"No Data (\u26a0)"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Orange warning"}),"\n",(0,t.jsx)(n.li,{children:'"No test session found to evaluate"'}),"\n",(0,t.jsx)(n.li,{children:"Run the test to get actual values"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"1-use-descriptive-labels",children:"1. Use Descriptive Labels"}),"\n",(0,t.jsxs)(n.p,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Good:"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'"Expected recipient match"'}),"\n",(0,t.jsx)(n.li,{children:'"Subject contains project reference"'}),"\n",(0,t.jsx)(n.li,{children:'"Response time under 10 seconds"'}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u274c ",(0,t.jsx)(n.strong,{children:"Bad:"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'"Test 1"'}),"\n",(0,t.jsx)(n.li,{children:'"Check"'}),"\n",(0,t.jsx)(n.li,{children:'"Custom eval"'}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"2-validate-jsonpath-first",children:"2. Validate JSONPath First"}),"\n",(0,t.jsx)(n.p,{children:"Before using complex expressions:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Run test with results"}),"\n",(0,t.jsxs)(n.li,{children:["Inspect the ",(0,t.jsx)(n.code,{children:"generatedData"})," structure"]}),"\n",(0,t.jsx)(n.li,{children:"Test your JSONPath against actual data"}),"\n",(0,t.jsx)(n.li,{children:"Verify it returns the expected value"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-remember-case-sensitivity",children:"3. Remember Case Sensitivity"}),"\n",(0,t.jsxs)(n.p,{children:["String operators are ",(0,t.jsx)(n.strong,{children:"case-sensitive"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'"Jon" equals "jon"     \u274c Does not match\n"Jon" equals "Jon"     \u2705 Matches\n'})}),"\n",(0,t.jsxs)(n.p,{children:["For case-insensitive matching, use ",(0,t.jsx)(n.code,{children:"contains"})," with known case."]}),"\n",(0,t.jsx)(n.h3,{id:"4-start-simple-then-expand",children:"4. Start Simple, Then Expand"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"First"}),": Test basic fields (action names, simple inputs)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Then"}),": Add nested field comparisons"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Finally"}),": Use complex filters and conditions"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"5-character-limit",children:"5. Character Limit"}),"\n",(0,t.jsx)(n.p,{children:"Each parameter field is limited to 100 characters. For long JSONPath:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Break down complex paths"}),"\n",(0,t.jsx)(n.li,{children:"Use shorter action names if possible"}),"\n",(0,t.jsx)(n.li,{children:"Consider a different data structure"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"jsonpath-returns-no-data",children:"JSONPath Returns No Data"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"}),' Custom evaluation shows "No actual value found"']}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u2713 Verify the action name is correct (case-sensitive)"}),"\n",(0,t.jsx)(n.li,{children:"\u2713 Check that the field path exists in generated data"}),"\n",(0,t.jsxs)(n.li,{children:["\u2713 Ensure ",(0,t.jsx)(n.code,{children:"isReference"})," checkbox is checked for JSONPath"]}),"\n",(0,t.jsx)(n.li,{children:"\u2713 Run test to generate fresh data"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"string-comparison-fails-unexpectedly",children:"String Comparison Fails Unexpectedly"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," Strings that look the same don't match"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u2713 Check for extra whitespace (leading/trailing spaces)"}),"\n",(0,t.jsx)(n.li,{children:'\u2713 Verify case sensitivity ("Jon" vs "jon")'}),"\n",(0,t.jsx)(n.li,{children:"\u2713 Look for special characters"}),"\n",(0,t.jsxs)(n.li,{children:["\u2713 Use ",(0,t.jsx)(n.code,{children:"contains"})," instead of ",(0,t.jsx)(n.code,{children:"equals"})," for partial match"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"numeric-comparison-issues",children:"Numeric Comparison Issues"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," Numbers don't compare correctly"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u2713 Verify value is a number, not a string"}),"\n",(0,t.jsx)(n.li,{children:"\u2713 Check decimal places (10.0 vs 10)"}),"\n",(0,t.jsx)(n.li,{children:"\u2713 Ensure expected value is numeric"}),"\n",(0,t.jsx)(n.li,{children:"\u2713 Use appropriate operator (>= vs >)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"custom-evaluation-not-visible",children:"Custom Evaluation Not Visible"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem:"})," Evaluation doesn't show in results"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u2713 Save the test case after adding evaluation"}),"\n",(0,t.jsx)(n.li,{children:"\u2713 Verify metadata is properly formatted"}),"\n",(0,t.jsx)(n.li,{children:"\u2713 Refresh the page"}),"\n",(0,t.jsx)(n.li,{children:"\u2713 Check that column isn't hidden"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"advanced-patterns",children:"Advanced Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"multiple-conditions",children:"Multiple Conditions"}),"\n",(0,t.jsx)(n.p,{children:"To test multiple values from the same action:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Evaluation 1: Check recipient"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Actual: $.generatedData.invokedActions[*][?(@.function.name == 'SendEmail')].function.input.to\nExpected: alice@example.com\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Evaluation 2: Check subject"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Actual: $.generatedData.invokedActions[*][?(@.function.name == 'SendEmail')].function.input.subject\nExpected: Project Update\n"})}),"\n",(0,t.jsx)(n.h3,{id:"array-elements",children:"Array Elements"}),"\n",(0,t.jsx)(n.p,{children:"Access specific array items:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonpath",children:"$.generatedData.invokedActions[*][?(@.function.name == 'ActionName')].additionalContext[0].value\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"[0]"})," gets the first context item."]}),"\n",(0,t.jsx)(n.h3,{id:"nested-properties",children:"Nested Properties"}),"\n",(0,t.jsx)(n.p,{children:"Navigate deep structures:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-jsonpath",children:"$.generatedData.invokedActions[*][?(@.function.name == 'ComplexAction')].function.input.metadata.customField.value\n"})}),"\n",(0,t.jsx)(n.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Need"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Operator"}),(0,t.jsx)(n.th,{children:"Example Use"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Exact match"}),(0,t.jsx)(n.td,{children:"String"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"equals"})}),(0,t.jsx)(n.td,{children:"Verify recipient"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Contains text"}),(0,t.jsx)(n.td,{children:"String"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"contains"})}),(0,t.jsx)(n.td,{children:"Check keywords"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Starts with"}),(0,t.jsx)(n.td,{children:"String"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"startswith"})}),(0,t.jsx)(n.td,{children:"Validate prefix"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Ends with"}),(0,t.jsx)(n.td,{children:"String"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"endswith"})}),(0,t.jsx)(n.td,{children:"Check domain"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Performance"}),(0,t.jsx)(n.td,{children:"Numeric"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"&lt;"})," or ",(0,t.jsx)(n.code,{children:"&lt;="})]}),(0,t.jsx)(n.td,{children:"Response time"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Limits"}),(0,t.jsx)(n.td,{children:"Numeric"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"&lt;="})}),(0,t.jsx)(n.td,{children:"API call count"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Thresholds"}),(0,t.jsx)(n.td,{children:"Numeric"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"&gt;"})," or ",(0,t.jsx)(n.code,{children:"&gt;="})]}),(0,t.jsx)(n.td,{children:"Minimum value"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Ranges"}),(0,t.jsx)(n.td,{children:"Numeric"}),(0,t.jsx)(n.td,{children:"Multiple evals"}),(0,t.jsx)(n.td,{children:"Min and max"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://developer.salesforce.com/docs/einstein/genai/guide/testing-api-custom-evaluation-criteria.html",children:"Salesforce Custom Evaluation Criteria Docs"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://goessner.net/articles/JsonPath/",children:"JSONPath Syntax Reference"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://developer.salesforce.com/docs/einstein/genai/guide/testing-overview.html",children:"Agentforce Testing Overview"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"related-features",children:"Related Features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/genai/adding-test-cases",children:"Adding Test Cases"})," - Create comprehensive test suites"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/genai/test-case-editing",children:"Test Case Editing"})," - Modify and refine tests"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/genai/conversation-history",children:"Conversation History"})," - Convert interactions to tests"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>c});var i=s(96540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);