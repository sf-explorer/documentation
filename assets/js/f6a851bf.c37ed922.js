"use strict";(self.webpackChunkdocusaurus_lms_demo=self.webpackChunkdocusaurus_lms_demo||[]).push([[1802],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var s=i(96540);const t={},r=s.createContext(t);function l(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(r.Provider,{value:n},e.children)}},75585:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"Features/Prompt Builder/token-optimization","title":"Token Optimization","description":"Strategies to reduce token usage and costs in prompt templates.","source":"@site/genai/Features/8. Prompt Builder/token-optimization.md","sourceDirName":"Features/8. Prompt Builder","slug":"/prompt-builder/token-optimization","permalink":"/genai/prompt-builder/token-optimization","draft":false,"unlisted":false,"editUrl":"https://github.com/sf-explorer/documentation/tree/master/genai/Features/8. Prompt Builder/token-optimization.md","tags":[],"version":"current","lastUpdatedAt":1765375009000,"sidebarPosition":5,"frontMatter":{"id":"token-optimization","slug":"/prompt-builder/token-optimization","title":"Token Optimization","sidebar_label":"Token Optimization","sidebar_position":5,"description":"Strategies to reduce token usage and costs in prompt templates.","keywords":["token optimization","cost reduction","efficiency","optimization"]},"sidebar":"genaiSidebar","previous":{"title":"Execution History","permalink":"/genai/prompt-builder/execution-history"},"next":{"title":"Best Practices","permalink":"/genai/prompt-builder/best-practices"}}');var t=i(74848),r=i(28453);const l={id:"token-optimization",slug:"/prompt-builder/token-optimization",title:"Token Optimization",sidebar_label:"Token Optimization",sidebar_position:5,description:"Strategies to reduce token usage and costs in prompt templates.",keywords:["token optimization","cost reduction","efficiency","optimization"]},o="Token Optimization",d={},a=[{value:"Understanding Token Costs",id:"understanding-token-costs",level:2},{value:"What Are Tokens?",id:"what-are-tokens",level:3},{value:"Cost Impact",id:"cost-impact",level:3},{value:"Version Comparison",id:"version-comparison",level:2},{value:"Optimization Strategies",id:"optimization-strategies",level:2},{value:"1. Remove Redundancy",id:"1-remove-redundancy",level:3},{value:"2. Use Concise Language",id:"2-use-concise-language",level:3},{value:"3. Limit Examples",id:"3-limit-examples",level:3},{value:"4. Optimize Variable Names",id:"4-optimize-variable-names",level:3},{value:"5. Remove Formatting",id:"5-remove-formatting",level:3},{value:"Token Analysis Workflow",id:"token-analysis-workflow",level:2},{value:"Optimization Checklist",id:"optimization-checklist",level:2},{value:"Token Targets",id:"token-targets",level:2},{value:"By Use Case",id:"by-use-case",level:3},{value:"Cost Savings Examples",id:"cost-savings-examples",level:2},{value:"Example 1: Customer Support Template",id:"example-1-customer-support-template",level:3},{value:"Example 2: Data Analysis Template",id:"example-2-data-analysis-template",level:3},{value:"Testing Optimizations",id:"testing-optimizations",level:2},{value:"Step 1: Baseline",id:"step-1-baseline",level:3},{value:"Step 2: Optimize",id:"step-2-optimize",level:3},{value:"Step 3: Validate",id:"step-3-validate",level:3},{value:"Step 4: Deploy",id:"step-4-deploy",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"token-optimization",children:"Token Optimization"})}),"\n",(0,t.jsx)(n.p,{children:"Reduce token usage and costs while maintaining template quality."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"understanding-token-costs",children:"Understanding Token Costs"}),"\n",(0,t.jsx)(n.h3,{id:"what-are-tokens",children:"What Are Tokens?"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'1 token \u2248 4 characters\n1 token \u2248 0.75 words\n\nExample:\n"Hello, how are you today?" = 7 tokens\n'})}),"\n",(0,t.jsx)(n.h3,{id:"cost-impact",children:"Cost Impact"}),"\n",(0,t.jsx)(n.mermaid,{value:"graph TD\n    A[Template Version] --\x3e B{Token Count}\n    B --\x3e|1200 tokens| C[\u274c High Cost: $2.40/1K calls]\n    B --\x3e|800 tokens| D[\u26a0\ufe0f Medium: $1.60/1K calls]\n    B --\x3e|400 tokens| E[\u2705 Low: $0.80/1K calls]\n    \n    style C fill:#f8d7da\n    style D fill:#fff3e0\n    style E fill:#d4edda"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"version-comparison",children:"Version Comparison"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Version"}),(0,t.jsx)(n.th,{children:"Avg Tokens"}),(0,t.jsx)(n.th,{children:"Cost/1K Calls"}),(0,t.jsx)(n.th,{children:"Change"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"v1"}),(0,t.jsx)(n.td,{children:"1,200"}),(0,t.jsx)(n.td,{children:"$2.40"}),(0,t.jsx)(n.td,{children:"-"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"v2"}),(0,t.jsx)(n.td,{children:"800"}),(0,t.jsx)(n.td,{children:"$1.60"}),(0,t.jsx)(n.td,{children:"\ud83d\udfe2 -33%"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"v3"}),(0,t.jsx)(n.td,{children:"600"}),(0,t.jsx)(n.td,{children:"$1.20"}),(0,t.jsx)(n.td,{children:"\ud83d\udfe2 -50%"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Goal:"})," Reduce tokens without sacrificing quality"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"optimization-strategies",children:"Optimization Strategies"}),"\n",(0,t.jsx)(n.h3,{id:"1-remove-redundancy",children:"1. Remove Redundancy"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u274c Before:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"You are a helpful customer service agent. \nPlease help the customer with their question.\nBe helpful and professional in your response.\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Tokens:"})," ~20"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u2705 After:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Help customer professionally.\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Tokens:"})," ~4"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Savings:"})," 80%"]}),"\n",(0,t.jsx)(n.h3,{id:"2-use-concise-language",children:"2. Use Concise Language"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u274c Verbose:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Please analyze the following data and provide \na comprehensive summary of the key findings.\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Tokens:"})," ~15"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u2705 Concise:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Summarize key findings:\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Tokens:"})," ~4"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Savings:"})," 73%"]}),"\n",(0,t.jsx)(n.h3,{id:"3-limit-examples",children:"3. Limit Examples"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u274c Too Many:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Example 1: [50 tokens]\nExample 2: [50 tokens]\nExample 3: [50 tokens]\nExample 4: [50 tokens]\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Total:"})," 200+ tokens"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u2705 Essential Only:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Example 1: [50 tokens]\nExample 2: [50 tokens]\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Total:"})," 100 tokens"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Savings:"})," 50%"]}),"\n",(0,t.jsx)(n.h3,{id:"4-optimize-variable-names",children:"4. Optimize Variable Names"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u274c Long:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"{!Customer_Full_Name_Including_Title}\n{!Product_Name_With_Version_Number}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u2705 Short:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"{!Customer_Name}\n{!Product}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Savings:"})," ~20 tokens per template"]}),"\n",(0,t.jsx)(n.h3,{id:"5-remove-formatting",children:"5. Remove Formatting"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u274c Extra Formatting:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Please note the following:\n- Point 1\n- Point 2\n- Point 3\n\nThank you for your attention.\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"\u2705 Direct:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Note:\n1. Point 1\n2. Point 2\n3. Point 3\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Savings:"})," ~30%"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"token-analysis-workflow",children:"Token Analysis Workflow"}),"\n",(0,t.jsx)(n.mermaid,{value:'graph TD\n    A[Review History] --\x3e B[Analyze Token Counts]\n    B --\x3e C{Average Tokens?}\n    \n    C --\x3e|>1000| D[\u274c Too Expensive]\n    C --\x3e|500-1000| E[\u26a0\ufe0f Consider Optimizing]\n    C --\x3e|"<500"| F[\u2705 Efficient]\n    \n    D --\x3e G[Shorten Template]\n    D --\x3e H[Remove Redundancy]\n    D --\x3e I[Use Smaller Model]\n    \n    E --\x3e J[Review Necessity]\n    \n    G --\x3e K[Test New Version]\n    H --\x3e K\n    I --\x3e K\n    J --\x3e K\n    \n    K --\x3e L[Compare Costs]\n    L --\x3e M{Savings?}\n    M --\x3e|Yes| N[\u2705 Deploy]\n    M --\x3e|No| O[Keep Current]\n    \n    style F fill:#d4edda\n    style N fill:#d4edda'}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"optimization-checklist",children:"Optimization Checklist"}),"\n",(0,t.jsx)(n.p,{children:"Before deploying:"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Removed redundant instructions"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Used concise language"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Limited examples to 2-3 max"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Shortened variable names"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Removed unnecessary formatting"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Tested output quality"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Verified token count <800"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Compared with previous version"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"token-targets",children:"Token Targets"}),"\n",(0,t.jsx)(n.h3,{id:"by-use-case",children:"By Use Case"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Use Case"}),(0,t.jsx)(n.th,{children:"Target Tokens"}),(0,t.jsx)(n.th,{children:"Acceptable Range"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Simple Classification"})}),(0,t.jsx)(n.td,{children:"100-200"}),(0,t.jsx)(n.td,{children:"Up to 300"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Customer Support"})}),(0,t.jsx)(n.td,{children:"300-500"}),(0,t.jsx)(n.td,{children:"Up to 700"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Data Analysis"})}),(0,t.jsx)(n.td,{children:"400-600"}),(0,t.jsx)(n.td,{children:"Up to 900"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Content Generation"})}),(0,t.jsx)(n.td,{children:"500-800"}),(0,t.jsx)(n.td,{children:"Up to 1200"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Complex Reasoning"})}),(0,t.jsx)(n.td,{children:"800-1200"}),(0,t.jsx)(n.td,{children:"Up to 1500"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"cost-savings-examples",children:"Cost Savings Examples"}),"\n",(0,t.jsx)(n.h3,{id:"example-1-customer-support-template",children:"Example 1: Customer Support Template"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Before Optimization:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Template length: 450 characters\nAvg tokens: 800\nExecutions: 5,000/month\nCost: 5,000 \xd7 800 \xd7 $0.002 / 1000 = $8.00/month\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"After Optimization:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Template length: 250 characters\nAvg tokens: 450\nExecutions: 5,000/month\nCost: 5,000 \xd7 450 \xd7 $0.002 / 1000 = $4.50/month\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Savings: $3.50/month (44%)"})}),"\n",(0,t.jsx)(n.h3,{id:"example-2-data-analysis-template",children:"Example 2: Data Analysis Template"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Before Optimization:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Avg tokens: 1,200\nExecutions: 10,000/month\nCost: 10,000 \xd7 1,200 \xd7 $0.002 / 1000 = $24.00/month\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"After Optimization:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Avg tokens: 600\nExecutions: 10,000/month\nCost: 10,000 \xd7 600 \xd7 $0.002 / 1000 = $12.00/month\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Savings: $12.00/month (50%)"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"testing-optimizations",children:"Testing Optimizations"}),"\n",(0,t.jsx)(n.h3,{id:"step-1-baseline",children:"Step 1: Baseline"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"1. Note current average token count\n2. Record output quality\n3. Document response time\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-2-optimize",children:"Step 2: Optimize"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"1. Apply optimization strategies\n2. Test with same inputs\n3. Measure new token count\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-3-validate",children:"Step 3: Validate"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"1. Verify output quality maintained\n2. Check user satisfaction\n3. Calculate cost savings\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-4-deploy",children:"Step 4: Deploy"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"1. If quality maintained + cost reduced \u2192 Deploy\n2. If quality degraded \u2192 Revert\n3. If minimal savings \u2192 Keep current\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"./testing-templates",children:"Testing Templates"})})," - Validate optimizations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"./execution-history",children:"Execution History"})})," - Track token usage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"./best-practices",children:"Best Practices"})})," - Overall guidelines"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"/genai/einstein-model-testing/cost-optimization",children:"Einstein Model Testing"})})," - More strategies"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Smart optimization reduces costs by 30-50% while maintaining quality."})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);