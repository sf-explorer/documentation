"use strict";(self.webpackChunkdocusaurus_lms_demo=self.webpackChunkdocusaurus_lms_demo||[]).push([[4655],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var r=s(96540);const i={},t=r.createContext(i);function l(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(t.Provider,{value:n},e.children)}},51099:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"Features/Atlas Reasoning Engine/stage-5-advanced-retrieval","title":"Stage 5 - Advanced Retrieval (RAG)","description":"Understand how Atlas finds and ranks the most relevant information using RAG, re-ranking, and context selection.","source":"@site/genai/Features/3. Atlas Reasoning Engine/stage-5-advanced-retrieval.md","sourceDirName":"Features/3. Atlas Reasoning Engine","slug":"/atlas-reasoning-engine/stage-5-advanced-retrieval","permalink":"/genai/atlas-reasoning-engine/stage-5-advanced-retrieval","draft":false,"unlisted":false,"editUrl":"https://github.com/sf-explorer/documentation/tree/master/genai/Features/3. Atlas Reasoning Engine/stage-5-advanced-retrieval.md","tags":[],"version":"current","lastUpdatedAt":1765375009000,"sidebarPosition":8,"frontMatter":{"id":"stage-5-advanced-retrieval","slug":"/atlas-reasoning-engine/stage-5-advanced-retrieval","title":"Stage 5 - Advanced Retrieval (RAG)","sidebar_label":"Stage 5: Advanced Retrieval","sidebar_position":8,"description":"Understand how Atlas finds and ranks the most relevant information using RAG, re-ranking, and context selection.","keywords":["advanced retrieval","RAG","re-ranking","vector search","relevance"]},"sidebar":"genaiSidebar","previous":{"title":"Stage 4: Query Planning","permalink":"/genai/atlas-reasoning-engine/stage-4-query-planning"},"next":{"title":"Stage 6: Quality & Safety","permalink":"/genai/atlas-reasoning-engine/stage-6-quality-safety"}}');var i=s(74848),t=s(28453);const l={id:"stage-5-advanced-retrieval",slug:"/atlas-reasoning-engine/stage-5-advanced-retrieval",title:"Stage 5 - Advanced Retrieval (RAG)",sidebar_label:"Stage 5: Advanced Retrieval",sidebar_position:8,description:"Understand how Atlas finds and ranks the most relevant information using RAG, re-ranking, and context selection.",keywords:["advanced retrieval","RAG","re-ranking","vector search","relevance"]},a="Stage 5: Advanced Retrieval (RAG)",c={},o=[{value:"Overview",id:"overview",level:2},{value:"What Happens in This Stage",id:"what-happens-in-this-stage",level:2},{value:"RAG Pipeline",id:"rag-pipeline",level:3},{value:"Three-Phase Process",id:"three-phase-process",level:2},{value:"Phase 1: Initial Retrieval",id:"phase-1-initial-retrieval",level:3},{value:"Phase 2: Re-Ranking",id:"phase-2-re-ranking",level:3},{value:"Phase 3: Context Selection",id:"phase-3-context-selection",level:3},{value:"Retrieval Techniques",id:"retrieval-techniques",level:2},{value:"1. Keyword Search",id:"1-keyword-search",level:3},{value:"2. Semantic Search (Vector Embeddings)",id:"2-semantic-search-vector-embeddings",level:3},{value:"3. Hybrid Search",id:"3-hybrid-search",level:3},{value:"How Agentforce Uses RAG",id:"how-agentforce-uses-rag",level:2},{value:"Citation Tracking",id:"citation-tracking",level:3},{value:"Multi-Hop Reasoning",id:"multi-hop-reasoning",level:3},{value:"Temporal Awareness",id:"temporal-awareness",level:3},{value:"Performance Benefits",id:"performance-benefits",level:2},{value:"Why RAG + Re-ranking Matters",id:"why-rag--re-ranking-matters",level:3},{value:"Monitoring",id:"monitoring",level:2},{value:"Performance Considerations",id:"performance-considerations",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Typical Retrieval Settings",id:"typical-retrieval-settings",level:3},{value:"Typical Re-ranking Weights",id:"typical-re-ranking-weights",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"\u2705 Do&#39;s",id:"-dos",level:3},{value:"\u274c Don&#39;ts",id:"-donts",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Issue: Low Relevance Scores",id:"issue-low-relevance-scores",level:3},{value:"Issue: Slow Retrieval",id:"issue-slow-retrieval",level:3},{value:"Integration with Stage 6",id:"integration-with-stage-6",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"stage-5-advanced-retrieval-rag",children:"Stage 5: Advanced Retrieval (RAG)"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["Stage 5 uses ",(0,i.jsx)(n.strong,{children:"Retrieval Augmented Generation (RAG)"})," to find and rank the most relevant information from all available sources, ensuring AI responses are grounded in actual data."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Processing Time:"})," 400-1000ms",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Type:"})," Critical path - Information retrieval",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"Purpose:"})," Find the best information to include in the response"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"what-happens-in-this-stage",children:"What Happens in This Stage"}),"\n",(0,i.jsx)(n.h3,{id:"rag-pipeline",children:"RAG Pipeline"}),"\n",(0,i.jsx)(n.mermaid,{value:"graph TD\n    Input[Action Results] --\x3e R1[Initial Retrieval]\n    \n    R1 --\x3e KB[30 Knowledge Articles]\n    R1 --\x3e CR[15 Case Resolutions]\n    R1 --\x3e PD[5 Policy Documents]\n    R1 --\x3e SR[Salesforce Records]\n    R1 --\x3e VE[Vector Embeddings]\n    \n    KB --\x3e RR[Re-Ranking Engine]\n    CR --\x3e RR\n    PD --\x3e RR\n    SR --\x3e RR\n    VE --\x3e RR\n    \n    RR --\x3e T1[1. Return Policy v3.2 - 0.95]\n    RR --\x3e T2[2. How to Process Returns - 0.92]\n    RR --\x3e T3[3. Return FAQ - 0.88]\n    RR --\x3e T4[4. Recent Case Resolution - 0.85]\n    RR --\x3e T5[5. Return Form Template - 0.82]\n    \n    T1 --\x3e SEL[Context Selection]\n    T2 --\x3e SEL\n    T3 --\x3e SEL\n    T4 -.excluded.-> X[ ]\n    T5 -.excluded.-> X\n    \n    SEL --\x3e Final[Top 3 Selected]\n    \n    style Input fill:#e8f5e9\n    style R1 fill:#fff3e0\n    style RR fill:#f3e5f5\n    style SEL fill:#fce4ec\n    style Final fill:#c8e6c9"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"three-phase-process",children:"Three-Phase Process"}),"\n",(0,i.jsx)(n.h3,{id:"phase-1-initial-retrieval",children:"Phase 1: Initial Retrieval"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Data Sources:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Knowledge Articles"}),": Curated documentation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Case Resolutions"}),": Historical solutions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Policy Documents"}),": Official guidelines"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Salesforce Records"}),": CRM data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Vector Embeddings"}),": Semantic search results"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"External APIs"}),": Third-party data"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Retrieval Methods:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'retrievalSources = [\n  {\n    source: "Knowledge Base",\n    method: "keyword_search",\n    results: 30\n  },\n  {\n    source: "Vector Store",\n    method: "semantic_search",\n    results: 20\n  },\n  {\n    source: "Salesforce",\n    method: "soql_query",\n    results: 15\n  }\n]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"phase-2-re-ranking",children:"Phase 2: Re-Ranking"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Scoring Criteria:"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Factor"}),(0,i.jsx)(n.th,{children:"Weight"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Semantic Similarity"})}),(0,i.jsx)(n.td,{children:"40%"}),(0,i.jsx)(n.td,{children:"How well content matches query meaning"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Recency"})}),(0,i.jsx)(n.td,{children:"20%"}),(0,i.jsx)(n.td,{children:"How recent the information is"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Authority"})}),(0,i.jsx)(n.td,{children:"15%"}),(0,i.jsx)(n.td,{children:"Source credibility and trust score"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"User Preferences"})}),(0,i.jsx)(n.td,{children:"10%"}),(0,i.jsx)(n.td,{children:"Historical user interactions"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Completeness"})}),(0,i.jsx)(n.td,{children:"10%"}),(0,i.jsx)(n.td,{children:"How fully it answers the question"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Accessibility"})}),(0,i.jsx)(n.td,{children:"5%"}),(0,i.jsx)(n.td,{children:"User permissions and access rights"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Re-Ranking:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'initialResults = [\n  {content: "Return Policy v3.2", score: 0.75},\n  {content: "How to Process Returns", score: 0.82},\n  {content: "Return FAQ", score: 0.68}\n];\n\nrerankedResults = applyReranking(initialResults, {\n  query: "How do I process a return?",\n  userPreferences: {...},\n  recencyBoost: 0.1,\n  authorityBoost: 0.05\n});\n\n// Results after re-ranking:\n[\n  {content: "Return Policy v3.2", score: 0.95},      // Boosted by authority\n  {content: "How to Process Returns", score: 0.92},  // Highest semantic match\n  {content: "Return FAQ", score: 0.88}               // Boosted by recency\n]\n'})}),"\n",(0,i.jsx)(n.h3,{id:"phase-3-context-selection",children:"Phase 3: Context Selection"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Selection Strategy:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Choose top N results (typically 3-5)"}),"\n",(0,i.jsx)(n.li,{children:"Ensure diversity of perspectives"}),"\n",(0,i.jsx)(n.li,{children:"Stay within token limits"}),"\n",(0,i.jsx)(n.li,{children:"Prioritize actionable information"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"tokenBudget = 4000; // Available tokens for context\nselectedContext = [];\nusedTokens = 0;\n\nfor (result of rankedResults) {\n  if (usedTokens + result.tokens < tokenBudget) {\n    selectedContext.push(result);\n    usedTokens += result.tokens;\n  }\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"retrieval-techniques",children:"Retrieval Techniques"}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"The following examples are conceptual illustrations of how RAG retrieval works in Agentforce. These are not actual APIs you can call directly."})}),"\n",(0,i.jsx)(n.h3,{id:"1-keyword-search",children:"1. Keyword Search"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Traditional text matching example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sql",children:"SELECT Title, Body, Score\nFROM Knowledge__kav\nWHERE Body LIKE '%return%' \n  AND Body LIKE '%process%'\n  AND PublishStatus = 'Online'\nORDER BY LastModifiedDate DESC\nLIMIT 30\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-semantic-search-vector-embeddings",children:"2. Semantic Search (Vector Embeddings)"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Meaning-based retrieval concept:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'// Conceptual: Convert query to vector embedding\nqueryVector = embedModel.encode("How do I process a return?");\n// [0.21, -0.15, 0.82, ..., 0.45] (768 dimensions)\n\n// Conceptual: Find similar vectors in database\nsimilarDocuments = vectorStore.search(queryVector, {\n  topK: 20,\n  threshold: 0.7,\n  metric: "cosine_similarity"\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-hybrid-search",children:"3. Hybrid Search"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Conceptual combination of keyword + semantic:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"keywordResults = keywordSearch(query);      // 30 results\nsemanticResults = semanticSearch(query);     // 20 results\n\n// Merge and deduplicate\ncombinedResults = merge(keywordResults, semanticResults);\n\n// Re-rank the combined set\nfinalResults = rerank(combinedResults);\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"how-agentforce-uses-rag",children:"How Agentforce Uses RAG"}),"\n",(0,i.jsx)(n.h3,{id:"citation-tracking",children:"Citation Tracking"}),"\n",(0,i.jsx)(n.p,{children:"Agentforce automatically tracks where information comes from:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'// Conceptual response structure\nresponse = {\n  answer: "To process a return...",\n  citations: [\n    {\n      source: "Return Policy v3.2",\n      url: "https://kb.company.com/returns/policy",\n      relevanceScore: 0.95,\n      excerpt: "Returns must be initiated within 30 days..."\n    },\n    {\n      source: "Case #12345",\n      url: "https://company.my.salesforce.com/500xxx",\n      relevanceScore: 0.88,\n      excerpt: "Customer successfully returned..."\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"multi-hop-reasoning",children:"Multi-Hop Reasoning"}),"\n",(0,i.jsx)(n.p,{children:"Agentforce can chain multiple retrievals together:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:'// Conceptual multi-hop retrieval\nquery = "What was the resolution for the last return issue from Acme Corp?"\n\nhop1 = retrieve("Recent cases for Acme Corp");\n// Found: Case #12345 - Return issue\n\nhop2 = retrieve("Resolution details for Case #12345");\n// Found: Refund processed, customer satisfied\n\nhop3 = retrieve("Similar resolutions");\n// Found: 5 similar cases with same pattern\n'})}),"\n",(0,i.jsx)(n.h3,{id:"temporal-awareness",children:"Temporal Awareness"}),"\n",(0,i.jsx)(n.p,{children:"Recent information is prioritized:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-javascript",children:"// Conceptual recency scoring adjustments\nscoringAdjustment = {\n  lastWeek: +0.20,\n  lastMonth: +0.10,\n  lastQuarter: +0.05,\n  lastYear: +0.02,\n  older: -0.10\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"performance-benefits",children:"Performance Benefits"}),"\n",(0,i.jsx)(n.h3,{id:"why-rag--re-ranking-matters",children:"Why RAG + Re-ranking Matters"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Hybrid Search Advantages:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Combines keyword precision with semantic understanding"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Finds relevant content even when exact terms don't match"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Adapts to different query phrasings"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Respects data permissions and recency"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Re-ranking Impact:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Prioritizes most relevant results"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Balances multiple relevance factors"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Reduces irrelevant responses"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Improves user satisfaction"}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"Hybrid search (keyword + semantic) consistently outperforms either method alone, especially for complex or ambiguous queries."})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"monitoring",children:"Monitoring"}),"\n",(0,i.jsx)(n.h3,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Typical Retrieval Performance:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Processing Time:"})," 400-1000ms per request"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Sources Queried:"})," 3-6 data sources (Knowledge, Salesforce Records, Vector Search)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Candidates Retrieved:"})," 30-50 initial candidates"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Final Selection:"})," 3-5 most relevant items"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Relevance Threshold:"})," Minimum 0.7 semantic similarity score"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Monitor your agent's performance through ",(0,i.jsx)(n.strong,{children:"Setup \u2192 Einstein \u2192 Einstein for Service"}),". Salesforce provides built-in analytics for response quality and retrieval effectiveness."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"typical-retrieval-settings",children:"Typical Retrieval Settings"}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["The following configurations represent typical values used by Agentforce's RAG engine. ",(0,i.jsx)(n.strong,{children:"These settings are managed by Salesforce and are NOT user-configurable"})," in standard Agentforce implementations. They are shown here for understanding how the system operates internally."]})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Retrieval Configuration:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "retrieval": {\n    "maxCandidates": 50,\n    "topK": 5,\n    "semanticThreshold": 0.7,\n    "enableHybridSearch": true,\n    "sources": {\n      "knowledgeBase": {\n        "enabled": true,\n        "weight": 1.0\n      },\n      "vectorSearch": {\n        "enabled": true,\n        "weight": 1.2\n      },\n      "salesforceRecords": {\n        "enabled": true,\n        "weight": 0.8\n      }\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"typical-re-ranking-weights",children:"Typical Re-ranking Weights"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example Re-ranking Configuration:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "reranking": {\n    "semanticSimilarity": 0.40,\n    "recency": 0.20,\n    "authority": 0.15,\n    "userPreferences": 0.10,\n    "completeness": 0.10,\n    "accessibility": 0.05\n  }\n}\n'})}),"\n",(0,i.jsxs)(n.admonition,{title:"What You CAN Configure",type:"note",children:[(0,i.jsx)(n.p,{children:"While the RAG engine parameters above are automatic, you can configure:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Data Sources"}),": Enable/disable Knowledge Base, Data Cloud, Salesforce objects"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Knowledge Articles"}),": Select which articles are accessible"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Record Access"}),": Configure object and field-level security"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Topic Filters"}),": Define which topics trigger retrieval"]}),"\n"]}),(0,i.jsxs)(n.p,{children:["Configure these in ",(0,i.jsx)(n.strong,{children:"Setup \u2192 Agent \u2192 Topics & Actions"})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"-dos",children:"\u2705 Do's"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u2705 Use hybrid search (keyword + semantic)"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Re-rank results for optimal relevance"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Track citations for transparency"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Respect token limits in context selection"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Monitor relevance scores"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"-donts",children:"\u274c Don'ts"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u274c Rely solely on keyword search"}),"\n",(0,i.jsx)(n.li,{children:"\u274c Skip re-ranking (uses first results)"}),"\n",(0,i.jsx)(n.li,{children:"\u274c Exceed token budgets"}),"\n",(0,i.jsx)(n.li,{children:"\u274c Ignore user permissions"}),"\n",(0,i.jsx)(n.li,{children:"\u274c Return uncited information"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"issue-low-relevance-scores",children:"Issue: Low Relevance Scores"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Users report irrelevant information"}),"\n",(0,i.jsx)(n.li,{children:"Low satisfaction scores"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Tune re-ranking weights"}),"\n",(0,i.jsx)(n.li,{children:"Expand vector embedding model"}),"\n",(0,i.jsx)(n.li,{children:"Add more data sources"}),"\n",(0,i.jsx)(n.li,{children:"Improve query understanding"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"issue-slow-retrieval",children:"Issue: Slow Retrieval"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Stage 5 takes > 1000ms"}),"\n",(0,i.jsx)(n.li,{children:"Timeout errors"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Add caching layer"}),"\n",(0,i.jsx)(n.li,{children:"Reduce max candidates"}),"\n",(0,i.jsx)(n.li,{children:"Optimize vector search indices"}),"\n",(0,i.jsx)(n.li,{children:"Use parallel retrieval"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"integration-with-stage-6",children:"Integration with Stage 6"}),"\n",(0,i.jsxs)(n.p,{children:["Retrieved information moves to ",(0,i.jsx)(n.a,{href:"./stage-6-quality-safety",children:"Stage 6: Quality & Safety Gates"}),":"]}),"\n",(0,i.jsx)(n.mermaid,{value:"graph LR\n    S4[Stage 4: Planning] --\x3e S5[Stage 5: Retrieval]\n    S5 --\x3e|Grounded Context| S6[Stage 6: Safety]\n    \n    style S4 fill:#e8f5e9\n    style S5 fill:#fff3e0\n    style S6 fill:#fce4ec"}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"./stage-4-query-planning",children:"Stage 4: Query Planning"})})," - Previous stage"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"./stage-6-quality-safety",children:"Stage 6: Quality & Safety"})})," - Next stage"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"../",children:"Complete Pipeline"})})," - All stages overview"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Stage 5 ensures AI responses are grounded in relevant, authoritative information through advanced RAG techniques, delivering 2x better relevance than basic keyword search."})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);